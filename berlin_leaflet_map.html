<!doctype html>
<html lang="nl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Berlijn Trip – Leaflet kaart</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  html, body, #map { height: 100%; margin: 0; }
  .legend {
    background: white; padding: 8px 10px; border-radius: 4px;
    box-shadow: 0 0 6px rgba(0,0,0,0.2); line-height: 1.4;
  }
  .legend .row { display:flex; align-items:center; gap:8px; }
  .legend .swatch { width:14px; height:14px; border-radius:3px; display:inline-block; }
</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
  // Initialize map
  var map = L.map('map');

  // OSM tiles
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap-contributors'
  }).addTo(map);

  // Data
  var day1 = [{"name":"Bootshaus (B&B)","lat":52.4686,"lon":13.4834,"idx":1},{"name":"Prenzlauer Berg - Kollwitzkiez","lat":52.538,"lon":13.4235,"idx":2},{"name":"The Barn Coffee (Kollwitzkiez)","lat":52.5399,"lon":13.4206,"idx":3},{"name":"Kanaan Restaurant","lat":52.5462,"lon":13.4224,"idx":4},{"name":"Hackescher Markt & Hackesche Höfe","lat":52.5246,"lon":13.4026,"idx":5},{"name":"Monbijoupark","lat":52.5231,"lon":13.3955,"idx":6}];
  var day2 = [{"name":"Bootshaus (B&B)","lat":52.4686,"lon":13.4834,"idx":1},{"name":"Alexanderplatz","lat":52.5219,"lon":13.4132,"idx":2},{"name":"Karl-Marx-Allee","lat":52.5201,"lon":13.4295,"idx":3},{"name":"Silo Coffee","lat":52.5104,"lon":13.4535,"idx":4},{"name":"East Side Gallery","lat":52.505,"lon":13.4399,"idx":5},{"name":"Oberbaumbrücke","lat":52.5013,"lon":13.4484,"idx":6},{"name":"Michelberger Hotel Café","lat":52.5024,"lon":13.4481,"idx":7},{"name":"Bernauer Straße Memorial","lat":52.5351,"lon":13.3903,"idx":8},{"name":"Tränenpalast","lat":52.5206,"lon":13.3862,"idx":9},{"name":"James-Simon-Park","lat":52.5215,"lon":13.3982,"idx":10}];
  var day3 = [{"name":"Bootshaus (B&B)","lat":52.4686,"lon":13.4834,"idx":1},{"name":"Kurfürstendamm","lat":52.503,"lon":13.3307,"idx":2},{"name":"The Barn Ku’damm","lat":52.5039,"lon":13.3309,"idx":3},{"name":"Checkpoint Charlie","lat":52.5076,"lon":13.3904,"idx":4},{"name":"Topographie des Terrors","lat":52.507,"lon":13.3826,"idx":5},{"name":"Mustafa’s Gemüse Kebap","lat":52.4997,"lon":13.4033,"idx":6},{"name":"Café Einstein Stammhaus","lat":52.5034,"lon":13.351,"idx":7},{"name":"Stasi Museum","lat":52.515,"lon":13.499,"idx":8},{"name":"Museumsinsel","lat":52.5169,"lon":13.401,"idx":9},{"name":"Lustgarten","lat":52.5187,"lon":13.3995,"idx":10}];

  function makeIcon(color) {
    // Simple colored marker via SVG divIcon
    var svg = `
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="36" viewBox="0 0 24 36">
        <path d="M12 0C5.37 0 0 5.37 0 12c0 8.25 12 24 12 24s12-15.75 12-24C24 5.37 18.63 0 12 0z" fill="${color}" stroke="#222" stroke-width="1"/>
        <circle cx="12" cy="12" r="5" fill="white"/>
      </svg>`;
    return L.divIcon({
      html: svg, className: '', iconSize: [24,36], iconAnchor: [12,36], popupAnchor:[0,-28]
    });
  }

  function addDay(points, color, groupName) {
    var g = L.layerGroup();
    var latlngs = [];
    points.forEach(function(p) {
      var m = L.marker([p.lat, p.lon], { icon: makeIcon(color), title: p.name })
        .bindPopup('<b>' + p.idx + '. ' + p.name + '</b>');
      m.addTo(g);
      latlngs.push([p.lat, p.lon]);
    });
    // Connect with a polyline
    L.polyline(latlngs, { color: color, weight: 3 }).addTo(g);
    return g;
  }

  var g1 = addDay(day1, '#d73027', 'Dag 1').addTo(map);
  var g2 = addDay(day2, '#4575b4', 'Dag 2').addTo(map);
  var g3 = addDay(day3, '#1a9850', 'Dag 3').addTo(map);

  var all = L.featureGroup([g1, g2, g3]);
  map.fitBounds(all.getBounds().pad(0.1));

  // Layer control
  var overlays = { "Dag 1 (rood)": g1, "Dag 2 (blauw)": g2, "Dag 3 (groen)": g3 };
  L.control.layers(null, overlays, { collapsed: false }).addTo(map);

  // Legend
  var legend = L.control({position: 'bottomleft'});
  legend.onAdd = function() {
    var div = L.DomUtil.create('div', 'legend');
    div.innerHTML = `
      <div class="row"><span class="swatch" style="background:#d73027"></span> Dag 1</div>
      <div class="row"><span class="swatch" style="background:#4575b4"></span> Dag 2</div>
      <div class="row"><span class="swatch" style="background:#1a9850"></span> Dag 3</div>`;
    return div;
  };
  legend.addTo(map);
</script>
</body>
</html>
